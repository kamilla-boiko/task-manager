{% extends "base.html" %}

{% block content %}
  <div class="d-flex justify-content-center my-4">
    <div class="d-block mb-4 mb-md-0">
      <h1 class="text-center">{{ task.name }}</h1>

      <div class="col-12 px-0">
        <div class="card border-0 shadow">
          <div class="card-body">
            <h2 class="fs-5 fw-bold mb-1">Task Type: {{ task.task_type }}</h2>
            <p><strong>Description:</strong> {{ task.description }}</p>
            <div class="d-block">
              <div class="d-flex align-items-center me-5">
                <div class="icon-shape icon-sm icon-shape-danger rounded me-3">
                  <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M10.25,2.375c-4.212,0-7.625,3.413-7.625,7.625s3.413,7.625,7.625,7.625s7.625-3.413,7.625-7.625S14.462,2.375,10.25,2.375M10.651,16.811v-0.403c0-0.221-0.181-0.401-0.401-0.401s-0.401,0.181-0.401,0.401v0.403c-3.443-0.201-6.208-2.966-6.409-6.409h0.404c0.22,0,0.401-0.181,0.401-0.401S4.063,9.599,3.843,9.599H3.439C3.64,6.155,6.405,3.391,9.849,3.19v0.403c0,0.22,0.181,0.401,0.401,0.401s0.401-0.181,0.401-0.401V3.19c3.443,0.201,6.208,2.965,6.409,6.409h-0.404c-0.22,0-0.4,0.181-0.4,0.401s0.181,0.401,0.4,0.401h0.404C16.859,13.845,14.095,16.609,10.651,16.811 M12.662,12.412c-0.156,0.156-0.409,0.159-0.568,0l-2.127-2.129C9.986,10.302,9.849,10.192,9.849,10V5.184c0-0.221,0.181-0.401,0.401-0.401s0.401,0.181,0.401,0.401v4.651l2.011,2.008C12.818,12.001,12.818,12.256,12.662,12.412"></path>
                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Deadline</label>
                  <h4 class="mb-0">{{ task.deadline }}</h4>
                </div>
              </div>
              <div class="d-flex align-items-center pt-3">
                <div class="icon-shape icon-sm icon-shape-secondary rounded me-3">
                  <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M11.709,7.438H8.292c-0.234,0-0.427,0.192-0.427,0.427v8.542c0,0.234,0.192,0.427,0.427,0.427h3.417c0.233,0,0.426-0.192,0.426-0.427V7.865C12.135,7.63,11.942,7.438,11.709,7.438 M11.282,15.979H8.719V8.292h2.563V15.979zM6.156,11.709H2.74c-0.235,0-0.427,0.191-0.427,0.426v4.271c0,0.234,0.192,0.427,0.427,0.427h3.417c0.235,0,0.427-0.192,0.427-0.427v-4.271C6.583,11.9,6.391,11.709,6.156,11.709 M5.729,15.979H3.167v-3.416h2.562V15.979zM17.261,3.167h-3.417c-0.235,0-0.427,0.192-0.427,0.427v12.812c0,0.234,0.191,0.427,0.427,0.427h3.417c0.234,0,0.427-0.192,0.427-0.427V3.594C17.688,3.359,17.495,3.167,17.261,3.167 M16.833,15.979h-2.562V4.021h2.562V15.979z"></path>
                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Status</label>
                  <h4 class="mb-0">
                    {% if task.is_completed %}
                      Completed
                    {% else %}
                      Uncompleted
                    {% endif %}
                  </h4>
                </div>
              </div>
              <div class="d-flex align-items-center pt-3">
                <div class="icon-shape icon-sm icon-shape-tertiary rounded me-3">
                  <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M17.592,8.936l-6.531-6.534c-0.593-0.631-0.751-0.245-0.751,0.056l0.002,2.999L5.427,9.075H2.491c-0.839,0-0.162,0.901-0.311,0.752l3.683,3.678l-3.081,3.108c-0.17,0.171-0.17,0.449,0,0.62c0.169,0.17,0.448,0.17,0.618,0l3.098-3.093l3.675,3.685c-0.099-0.099,0.773,0.474,0.773-0.296v-2.965l3.601-4.872l2.734-0.005C17.73,9.688,18.326,9.669,17.592,8.936 M3.534,9.904h1.906l4.659,4.66v1.906L3.534,9.904z M10.522,13.717L6.287,9.48l4.325-3.124l3.088,3.124L10.522,13.717z M14.335,8.845l-3.177-3.177V3.762l5.083,5.083H14.335z"></path>
                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Priority</label>
                  <h4 class="mb-0">{{ task.priority }}</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <br>

      <div class="col-12 col-xxl-12 mb-4">
        <div class="card border-0 shadow">
          <div class="card-header border-bottom d-flex align-items-center justify-content-between">
            <h2 class="fs-5 fw-bold mb-0">Assignees</h2>
          </div>
          <div class="card-body">
            <ul class="list-group list-group-flush list my--3">
              <li class="list-group-item px-0">
                {% for assignee in task.assignees.all %}
                  <div class="row align-items-center">
                    <div class="col-auto ms--2">
                      <h4 class="h6 mb-0">
                        {{ assignee.id }}. {{ assignee.first_name }} {{ assignee.last_name }}
                      </h4>
                      <div class="d-flex align-items-center">
                        <small>(username: {{ assignee.username }})</small>
                      </div>
                    </div>
                    <div class="col text-end">
                      {{ assignee.position }}
                    </div>
                  </div>
                  <br>
                {% empty %}
                  <p>No workers!</p>
                {% endfor %}
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="d-grid">
        <a class="btn btn-success btn-lg" href="{% url 'dashboard:task-update' pk=task.id %}">Update</a>
        <br>
        <a class="btn btn-danger btn-lg" href="{% url 'dashboard:task-delete' pk=task.id %}">Delete</a>
      </div>
    </div>
  </div>
{% endblock %}
