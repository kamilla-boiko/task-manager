{% extends "base.html" %}

{% block content %}
  <div class="d-flex justify-content-center my-4">
    <div class="d-block mb-4 mb-md-0">
      <h1 class="text-center">{{ worker.first_name }} {{ worker.last_name }}</h1>

      <div class="col-12 px-0">
        <div class="card border-0 shadow">
          <div class="card-body">
            <div class="d-block">
              <div class="d-flex align-items-center me-5">
                <div class="icon-shape icon-sm icon-shape-danger rounded me-3">
                  <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"></path>
                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Username</label>
                  <h4 class="mb-0">{{ worker.username }}</h4>
                </div>
              </div>
              <div class="d-flex align-items-center pt-3">
                <div class="icon-shape icon-sm icon-shape-secondary rounded me-3">
                  <svg fill="currentColor" width="40" height="40" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16.469,8.924l-2.414,2.413c-0.156,0.156-0.408,0.156-0.564,0c-0.156-0.155-0.156-0.408,0-0.563l2.414-2.414c1.175-1.175,1.175-3.087,0-4.262c-0.57-0.569-1.326-0.883-2.132-0.883s-1.562,0.313-2.132,0.883L9.227,6.511c-1.175,1.175-1.175,3.087,0,4.263c0.288,0.288,0.624,0.511,0.997,0.662c0.204,0.083,0.303,0.315,0.22,0.52c-0.171,0.422-0.643,0.17-0.52,0.22c-0.473-0.191-0.898-0.474-1.262-0.838c-1.487-1.485-1.487-3.904,0-5.391l2.414-2.413c0.72-0.72,1.678-1.117,2.696-1.117s1.976,0.396,2.696,1.117C17.955,5.02,17.955,7.438,16.469,8.924 M10.076,7.825c-0.205-0.083-0.437,0.016-0.52,0.22c-0.083,0.205,0.016,0.437,0.22,0.52c0.374,0.151,0.709,0.374,0.997,0.662c1.176,1.176,1.176,3.088,0,4.263l-2.414,2.413c-0.569,0.569-1.326,0.883-2.131,0.883s-1.562-0.313-2.132-0.883c-1.175-1.175-1.175-3.087,0-4.262L6.51,9.227c0.156-0.155,0.156-0.408,0-0.564c-0.156-0.156-0.408-0.156-0.564,0l-2.414,2.414c-1.487,1.485-1.487,3.904,0,5.391c0.72,0.72,1.678,1.116,2.696,1.116s1.976-0.396,2.696-1.116l2.414-2.413c1.487-1.486,1.487-3.905,0-5.392C10.974,8.298,10.55,8.017,10.076,7.825"></path>                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Email</label>
                  <h4 class="mb-0">{{ worker.email }}</h4>
                </div>
              </div>
              <div class="d-flex align-items-center pt-3">
                <div class="icon-shape icon-sm icon-shape-tertiary rounded me-3">
                  <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.684,7.925l-5.131-0.67L10.329,2.57c-0.131-0.275-0.527-0.275-0.658,0L7.447,7.255l-5.131,0.67C2.014,7.964,1.892,8.333,2.113,8.54l3.76,3.568L4.924,17.21c-0.056,0.297,0.261,0.525,0.533,0.379L10,15.109l4.543,2.479c0.273,0.153,0.587-0.089,0.533-0.379l-0.949-5.103l3.76-3.568C18.108,8.333,17.986,7.964,17.684,7.925 M13.481,11.723c-0.089,0.083-0.129,0.205-0.105,0.324l0.848,4.547l-4.047-2.208c-0.055-0.03-0.116-0.045-0.176-0.045s-0.122,0.015-0.176,0.045l-4.047,2.208l0.847-4.547c0.023-0.119-0.016-0.241-0.105-0.324L3.162,8.54L7.74,7.941c0.124-0.016,0.229-0.093,0.282-0.203L10,3.568l1.978,4.17c0.053,0.11,0.158,0.187,0.282,0.203l4.578,0.598L13.481,11.723z"></path>
                  </svg>
                </div>
                <div class="d-block">
                  <label class="mb-0">Position</label>
                  <h4 class="mb-0">{{ worker.position }}</h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <br>

      <div class="row">
        <div class="col-sm-6 col-xl-6 mb-6">
          <div class="card border-0 shadow">
            <div class="card-header border-bottom d-flex align-items-center justify-content-between">
              <h2 class="fs-5 fw-bold mb-0">Uncompleted tasks</h2>
            </div>
            <div class="card-body">
              {% if worker.tasks.all %}
                <ul class="list-group list-group-flush list my--3">
                  {% for task in worker.tasks.all %}
                    {% if not task.is_completed %}
                      <li class="list-group-item px-0">
                        <div class="row align-items-center">
                          <div class="col-auto ms--2">
                            <h4 class="h6 mb-0">
                              {{ task.id }}. {{ task.name }}
                            </h4>
                            <div class="d-flex align-items-center">
                              <small>Task Type: {{ task.task_type }}</small>
                            </div>
                            <div class="d-flex align-items-center">
                              <small>Deadline: {{ task.deadline }}</small>
                            </div>
                            <div class="d-flex align-items-center">
                              <small>Priority: {{ task.priority }}</small>
                            </div>
                          </div>
                        </div>
                      </li>
                    {% endif %}
                  {% empty %}
                    <p>No tasks!</p>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          </div>
        </div>

        <div class="col-sm-6 col-xl-6 mb-6">
          <div class="card border-0 shadow">
            <div class="card-header border-bottom d-flex align-items-center justify-content-between">
              <h2 class="fs-5 fw-bold mb-0">Completed tasks</h2>
            </div>
            <div class="card-body">
              {% if worker.tasks.all %}
                <ul class="list-group list-group-flush list my--3">
                  {% for task in worker.tasks.all %}
                    {% if task.is_completed %}
                      <li class="list-group-item px-0">
                        <div class="row align-items-center">
                          <div class="col-auto ms--2">
                            <h4 class="h6 mb-0">
                              {{ task.id }}. {{ task.name }}
                            </h4>
                            <div class="d-flex align-items-center">
                              <small>Task Type: {{ task.task_type }}</small>
                            </div>
                            <div class="d-flex align-items-center">
                              <small>Deadline: {{ task.deadline }}</small>
                            </div>
                            <div class="d-flex align-items-center">
                              <small>Priority: {{ task.priority }}</small>
                            </div>
                          </div>
                        </div>
                      </li>
                    {% endif %}
                  {% empty %}
                    <p>No tasks!</p>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <div class="d-grid">
        <a class="btn btn-success btn-lg" href="{% url 'dashboard:worker-update' pk=worker.id %}">Update</a>
        <br>
        <a class="btn btn-danger btn-lg" href="{% url 'dashboard:worker-delete' pk=worker.id %}">Delete</a>
      </div>
    </div>
  </div>
{% endblock %}
